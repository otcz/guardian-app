<div class="orgcfg-wrapper">
  <div class="page-header">
    <div class="titles">
      <h2>Gestionar Organización</h2>
      <p class="subtitle" *ngIf="org">
        {{ org.nombre }}
        <span class="chip" [class.chip-success]="org.activa" [class.chip-danger]="!org.activa">{{ org.activa ? 'ACTIVA' : 'INACTIVA' }}</span>
      </p>
    </div>

    <span class="spacer"></span>
    <button pButton type="button" icon="pi pi-arrow-left" label="Volver" class="p-button-text" (click)="back()"></button>
  </div>

  <div class="grid">
    <p-card class="card">
      <div class="card-header"><h3>Organización</h3></div>

      <div class="field">
        <label for="orgSelectCard">Seleccionar organización</label>
        <p-dropdown id="orgSelectCard"
                    [options]="orgs"
                    optionLabel="nombre"
                    optionValue="id"
                    [filter]="true"
                    [showClear]="false"
                    placeholder="Seleccione organización"
                    [(ngModel)]="orgId"
                    (ngModelChange)="onOrgChanged($event)"
                    [disabled]="loading || loadingOrgs"
                    appendTo="body">
        </p-dropdown>
      </div>

      <div *ngIf="org as o" class="org-summary">
        <div class="kv"><span>ID</span><b>{{ o.id }}</b></div>
        <div class="kv"><span>Nombre</span><b>{{ o.nombre }}</b></div>
        <div class="kv"><span>Estado</span><b>{{ o.activa ? 'ACTIVA' : 'INACTIVA' }}</b></div>
        <div class="kv" *ngIf="o.fecha_creacion"><span>Creación</span><b>{{ o.fecha_creacion | date:'yyyy-MM-dd HH:mm' }}</b></div>
        <div class="kv" *ngIf="o.fecha_actualizacion"><span>Actualización</span><b>{{ o.fecha_actualizacion | date:'yyyy-MM-dd HH:mm' }}</b></div>
      </div>

      <p-message *ngIf="error" severity="error" [text]="error"></p-message>
    </p-card>
  </div>
</div>
