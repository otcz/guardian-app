/* Wrapper y cabecera */
.orgcfg-wrapper { padding: 1.25rem clamp(.75rem, 2vw, 1.5rem); }
.page-header { display: flex; align-items: center; gap: .75rem; margin-bottom: 1.25rem; }
.page-header h2 { margin: 0; font-weight: 700; letter-spacing: .2px; font-size: 1.35rem; }
.page-header .subtitle { margin: .15rem 0 0 0; opacity: .95; font-size: .85rem; }
.page-header .spacer { flex: 1 1 auto; }

/* Tarjetas y layout */
.grid { display: grid; gap: 1.2rem; grid-template-columns: minmax(320px, 720px); }
.card ::ng-deep .p-card {
  background: var(--surface-alt) !important;
  border: 1px solid rgba(255,255,255,.06) !important;
  border-radius: 12px;
}

/* Encabezado de tarjeta */
.card-header { display: flex; align-items: center; gap: .5rem; margin-bottom: .75rem; }
.card-header h3 { margin: 0; font-size: 1.05rem; font-weight: 800; letter-spacing: .2px; }

/* Campos */
.field { display: flex; flex-direction: column; gap: .5rem; margin-bottom: 1rem; }
.field label { font-size: .9rem; font-weight: 600; letter-spacing: .2px; color: var(--text); }

/* Acciones */
.actions { display: flex; gap: .6rem; margin-top: .5rem; flex-wrap: wrap; }

/* Chip de estado */
.chip { display: inline-flex; align-items: center; padding: .2rem .65rem; border-radius: 999px; font-size: .74rem; font-weight: 800; color: #fff; background: #6b7280; }
.chip-success { background: var(--success); }
.chip-danger { background: #ef4444; }

/* Vista previa */
.strategy-preview { margin-top: .75rem; border-top: 1px dashed color-mix(in srgb, var(--border) 70%, transparent); padding-top: .75rem; display: grid; gap: .5rem; }
.kv { display: flex; gap: .5rem; align-items: center; }
.kv span { width: 180px; color: var(--muted); font-size: .82rem; }
.kv b { font-weight: 800; color: var(--text); }
.flags { display: grid; grid-template-columns: repeat(auto-fit, minmax(260px, 1fr)); gap: .5rem; }
.flag { display: flex; gap: .5rem; align-items: center; padding: .5rem .7rem; border: 1px solid color-mix(in srgb, var(--border) 70%, transparent); border-radius: 8px; background: color-mix(in srgb, var(--surface) 90%, #000); }
.flag .good { color: var(--success); }
.flag .bad { color: #ef4444; }
.flag-text { color: var(--text); font-size: .86rem; font-weight: 600; }

/* Tema oscuro: etiquetas y placeholders blancos */
:host-context(.theme-dark) .field label,
:host-context(.theme-black) .field label,
:host-context(.theme-dark) .flag-text,
:host-context(.theme-black) .flag-text,
:host-context(.theme-dark) .page-header h2,
:host-context(.theme-black) .page-header h2,
:host-context(.theme-dark) .card-header h3,
:host-context(.theme-black) .card-header h3 { color: #fff; }

/* Dropdown y MultiSelect: tamaños y coherencia */
:host ::ng-deep .p-dropdown,
:host ::ng-deep .p-multiselect { min-width: 280px; }
:host ::ng-deep .p-dropdown .p-dropdown-label,
:host ::ng-deep .p-multiselect .p-multiselect-label { padding: .6rem .75rem; font-size: .95rem; }

/* Paneles: especificar por tema */
/* Tema claro: fondo claro y texto oscuro */
:host-context(.theme-light) ::ng-deep .p-dropdown-panel,
:host-context(.theme-light) ::ng-deep .p-multiselect-panel {
  background: #ffffff;
  color: #111;
  border: 1px solid color-mix(in srgb, var(--border) 70%, transparent);
}
:host-context(.theme-light) ::ng-deep .p-dropdown-panel .p-dropdown-header,
:host-context(.theme-light) ::ng-deep .p-multiselect-panel .p-multiselect-header {
  background: #ffffff;
  color: #111;
  border-bottom: 1px solid color-mix(in srgb, var(--border) 70%, transparent);
}

/* Tema oscuro/black: fondo oscuro */
:host-context(.theme-dark) ::ng-deep .p-dropdown-panel,
:host-context(.theme-black) ::ng-deep .p-dropdown-panel,
:host-context(.theme-dark) ::ng-deep .p-multiselect-panel,
:host-context(.theme-black) ::ng-deep .p-multiselect-panel {
  background: color-mix(in srgb, var(--surface) 92%, #000);
  border: 1px solid color-mix(in srgb, var(--border) 70%, transparent);
}
:host-context(.theme-dark) ::ng-deep .p-dropdown-panel .p-dropdown-header,
:host-context(.theme-black) ::ng-deep .p-dropdown-panel .p-dropdown-header,
:host-context(.theme-dark) ::ng-deep .p-multiselect-panel .p-multiselect-header,
:host-context(.theme-black) ::ng-deep .p-multiselect-panel .p-multiselect-header {
  background: color-mix(in srgb, var(--surface) 92%, #000);
  border-bottom: 1px solid color-mix(in srgb, var(--border) 70%, transparent);
}

/* Filtro dentro de los paneles: por tema */
/* Claro */
:host-context(.theme-light) ::ng-deep .p-dropdown-panel .p-dropdown-filter-container .p-inputtext,
:host-context(.theme-light) ::ng-deep .p-multiselect-panel .p-multiselect-filter-container .p-inputtext {
  background: #fff;
  color: #111;
  border: 1px solid color-mix(in srgb, var(--border) 70%, transparent);
}
:host-context(.theme-light) ::ng-deep .p-dropdown-panel .p-dropdown-filter-container .p-inputtext::placeholder,
:host-context(.theme-light) ::ng-deep .p-multiselect-panel .p-multiselect-filter-container .p-inputtext::placeholder { color: #111; opacity: .6; }
:host-context(.theme-light) ::ng-deep .p-dropdown-filter-icon { color: #111; opacity: .75; }

/* Oscuro */
:host-context(.theme-dark) ::ng-deep .p-dropdown-panel .p-dropdown-filter-container .p-inputtext,
:host-context(.theme-black) ::ng-deep .p-dropdown-panel .p-dropdown-filter-container .p-inputtext,
:host-context(.theme-dark) ::ng-deep .p-multiselect-panel .p-multiselect-filter-container .p-inputtext,
:host-context(.theme-black) ::ng-deep .p-multiselect-panel .p-multiselect-filter-container .p-inputtext {
  background: color-mix(in srgb, var(--surface) 88%, #000);
  color: #fff;
  border: 1px solid color-mix(in srgb, var(--border) 70%, transparent);
}
:host-context(.theme-dark) ::ng-deep .p-dropdown-panel .p-dropdown-filter-container .p-inputtext::placeholder,
:host-context(.theme-black) ::ng-deep .p-dropdown-panel .p-dropdown-filter-container .p-inputtext::placeholder,
:host-context(.theme-dark) ::ng-deep .p-multiselect-panel .p-multiselect-filter-container .p-inputtext::placeholder,
:host-context(.theme-black) ::ng-deep .p-multiselect-panel .p-multiselect-filter-container .p-inputtext::placeholder { color: #fff; opacity: .7; }

/* Placeholder del control cuando no hay selección */
:host-context(.theme-dark) ::ng-deep .p-dropdown .p-dropdown-label.p-placeholder,
:host-context(.theme-black) ::ng-deep .p-dropdown .p-dropdown-label.p-placeholder,
:host-context(.theme-dark) ::ng-deep .p-multiselect .p-multiselect-label.p-placeholder,
:host-context(.theme-black) ::ng-deep .p-multiselect .p-multiselect-label.p-placeholder { color: #fff; opacity: .85; }

/* Ítems del panel */
:host ::ng-deep .p-dropdown-panel .p-dropdown-items,
:host ::ng-deep .p-multiselect-panel .p-multiselect-items { padding: .25rem; }
:host ::ng-deep .p-dropdown-panel .p-dropdown-item,
:host ::ng-deep .p-multiselect-panel .p-multiselect-item { border-radius: 8px; color: var(--text); }
:host ::ng-deep .p-dropdown-panel .p-dropdown-item:not(.p-highlight):hover,
:host ::ng-deep .p-multiselect-panel .p-multiselect-item:not(.p-highlight):hover {
  background: color-mix(in srgb, var(--primary) 14%, transparent);
}
:host ::ng-deep .p-dropdown-panel .p-dropdown-item.p-highlight,
:host ::ng-deep .p-multiselect-panel .p-multiselect-item.p-highlight {
  background: color-mix(in srgb, var(--primary) 18%, transparent);
  color: var(--text);
}

/* Plantillas de opciones: tipografía */
.opt-item, .opt-label { display: flex; align-items: center; gap: .35rem; }
.opt-title { font-weight: 700; }
.opt-desc { opacity: .85; }

/* Hint debajo de multiselect */
.hint { display: inline-block; margin-top: .25rem; color: var(--muted); }

/* En temas oscuros, forzar color blanco para títulos y hint solicitados */
:host-context(.theme-dark) .opt-title,
:host-context(.theme-black) .opt-title,
:host-context(.theme-dark) .hint,
:host-context(.theme-black) .hint { color: #fff; }

/* También dentro de paneles de PrimeNG (overlay) */
:host-context(.theme-dark) ::ng-deep .p-dropdown-panel .opt-title,
:host-context(.theme-black) ::ng-deep .p-dropdown-panel .opt-title,
:host-context(.theme-dark) ::ng-deep .p-multiselect-panel .opt-title,
:host-context(.theme-black) ::ng-deep .p-multiselect-panel .opt-title { color: #fff; }

/* Divider más visible */
.divider { border: 0; height: 1px; background: color-mix(in srgb, var(--border) 70%, transparent); margin: 1rem 0; }

/* Control p-dropdown en modo oscuro: fondo oscuro y texto blanco */
:host-context(.theme-dark) ::ng-deep .p-dropdown,
:host-context(.theme-black) ::ng-deep .p-dropdown {
  background: color-mix(in srgb, var(--surface) 90%, #000) !important;
  border: 1px solid color-mix(in srgb, var(--border) 70%, transparent) !important;
}
:host-context(.theme-dark) ::ng-deep .p-dropdown .p-dropdown-label,
:host-context(.theme-black) ::ng-deep .p-dropdown .p-dropdown-label {
  color: #fff !important;
}
:host-context(.theme-dark) ::ng-deep .p-dropdown .p-dropdown-trigger-icon,
:host-context(.theme-black) ::ng-deep .p-dropdown .p-dropdown-trigger-icon,
:host-context(.theme-dark) ::ng-deep .p-dropdown .p-dropdown-trigger .pi,
:host-context(.theme-black) ::ng-deep .p-dropdown .p-dropdown-trigger .pi {
  color: #fff !important;
  opacity: .95;
}
/* Hover/focus sutil en oscuro */
:host-context(.theme-dark) ::ng-deep .p-dropdown:hover,
:host-context(.theme-black) ::ng-deep .p-dropdown:hover {
  box-shadow: 0 0 0 2px color-mix(in srgb, var(--primary) 18%, transparent);
}
:host-context(.theme-dark) ::ng-deep .p-dropdown.p-focus,
:host-context(.theme-black) ::ng-deep .p-dropdown.p-focus {
  box-shadow: 0 0 0 3px color-mix(in srgb, var(--primary) 22%, transparent);
}

/* Descripción en blanco en tema oscuro (selección y panel) */
:host-context(.theme-dark) .opt-desc,
:host-context(.theme-black) .opt-desc { color: #fff !important; opacity: .9; }
:host-context(.theme-dark) ::ng-deep .p-dropdown-panel .opt-desc,
:host-context(.theme-black) ::ng-deep .p-dropdown-panel .opt-desc { color: #fff !important; opacity: .9; }

/* Filtro en header del panel (PrimeNG 18) */
:host ::ng-deep .p-dropdown-header .p-inputtext,
:host ::ng-deep .p-dropdown-filter { background: color-mix(in srgb, var(--surface) 88%, #000) !important; color: #fff !important; border: 1px solid color-mix(in srgb, var(--border) 70%, transparent) !important; }
:host ::ng-deep .p-dropdown-header .p-inputtext:focus,
:host ::ng-deep .p-dropdown-filter:focus { box-shadow: 0 0 0 2px color-mix(in srgb, var(--primary) 22%, transparent) !important; outline: none !important; }
:host ::ng-deep .p-dropdown-filter-icon { color: #fff !important; opacity: .9; }

/* Overrides para tema claro (theme-light): fondo claro y texto oscuro */
:host-context(.theme-light) {
  --surface: #ffffff;
  --surface-alt: #f7f7f7;
  --primary: #007bff;
  --primary-hover: #0056b3;
  --primary-content: #ffffff;
  --accent: #17a2b8;
  --accent-hover: #117a8b;
  --accent-content: #ffffff;
  --success: #28a745;
  --success-hover: #218838;
  --success-content: #ffffff;
  --warning: #ffc107;
  --warning-hover: #e0a800;
  --warning-content: #212529;
  --danger: #dc3545;
  --danger-hover: #c82333;
  --danger-content: #ffffff;
  --text: #111;
  --text-muted: #6c757d;
  --text-success: #28a745;
  --text-danger: #dc3545;
  --text-warning: #ffc107;
  --text-info: #17a2b8;
  --heading: #111;
  --border: #dee2e6;
  --shadow: rgba(0, 0, 0, 0.1);
}

/* Overrides para tema oscuro (theme-dark) y negro (theme-black): fondo oscuro y texto blanco */
:host-context(.theme-dark),
:host-context(.theme-black) {
  --surface: #121212;
  --surface-alt: #1e1e1e;
  --primary: #bb86fc;
  --primary-hover: #9b59b6;
  --primary-content: #121212;
  --accent: #03dac6;
  --accent-hover: #02a89f;
  --accent-content: #121212;
  --success: #03dac6;
  --success-hover: #03a896;
  --success-content: #121212;
  --warning: #ffea00;
  --warning-hover: #e6d600;
  --warning-content: #121212;
  --danger: #cf6679;
  --danger-hover: #b85f7f;
  --danger-content: #121212;
  --text: #ffffff;
  --text-muted: #a0a0a0;
  --text-success: #03dac6;
  --text-danger: #cf6679;
  --text-warning: #ffea00;
  --text-info: #03dac6;
  --heading: #ffffff;
  --border: #333333;
  --shadow: rgba(0, 0, 0, 0.3);
}
