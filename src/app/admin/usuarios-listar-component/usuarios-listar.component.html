<div class="container">
  <p-card class="card">
    <div class="page-header">
      <h2>Usuarios</h2>
      <span class="spacer"></span>
      <button pButton type="button" label="Crear usuario" icon="pi pi-plus" [routerLink]="['/gestion-de-usuarios/crear-usuario']"></button>
    </div>

    <div class="field">
      <input pInputText type="text" placeholder="Filtrar..." [(ngModel)]="filter" (ngModelChange)="applyFilter()" />
    </div>

    <p-table [value]="filtered" [loading]="loading" [rows]="10" [paginator]="true" [responsiveLayout]="'scroll'">
      <ng-template pTemplate="header">
        <tr>
          <th>Username</th>
          <th>Nombre</th>
          <th>Email</th>
          <th>Alcance</th>
          <th>Activo</th>
          <th style="width:220px;">Acciones</th>
        </tr>
      </ng-template>
      <ng-template pTemplate="body" let-u>
        <tr>
          <td>{{ u.username }}</td>
          <td>{{ u.nombreCompleto || '-' }}</td>
          <td>{{ u.email || '-' }}</td>
          <td>{{ u.scopeNivel || '-' }}</td>
          <td>
            <span class="chip" [ngClass]="u.activo ? 'chip-success' : 'chip-danger'">{{ u.activo ? 'ACTIVO' : 'INACTIVO' }}</span>
          </td>
          <td>
            <div class="actions">
              <button pButton type="button" icon="pi pi-cog" class="p-button p-button-text" [routerLink]="['/gestion-de-usuarios/gestionar-usuario']" [queryParams]="{ id: u.id }" title="Gestionar"></button>
              <button pButton type="button" [label]="u.activo ? 'Desactivar' : 'Activar'" [icon]="u.activo ? 'pi pi-ban' : 'pi pi-check'" class="p-button p-button-outlined" (click)="toggle(u)"></button>
            </div>
          </td>
        </tr>
      </ng-template>
    </p-table>
  </p-card>
</div>

