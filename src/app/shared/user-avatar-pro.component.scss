:host { display: inline-block; }

/* Chip compacto */
.chip {
  display:flex; align-items:center; gap:.6rem; padding:.46rem .7rem; border-radius: 999px; cursor: pointer;
  transition: transform .15s ease, box-shadow .2s ease; background: var(--surface); color: var(--text);
  box-shadow: 0 2px 6px rgba(0,0,0,.08); border: 1px solid var(--border);
}
.chip:hover { transform: translateY(-1px); box-shadow: 0 6px 16px rgba(0,0,0,.12); }
.chip .initials { width: 34px; height: 34px; border-radius: 50%; display:flex; align-items:center; justify-content:center; font-weight: 900; background: color-mix(in srgb, var(--secondary) 30%, var(--surface-alt)); color: var(--text); }
.chip .meta { display:flex; flex-direction:column; line-height:1.1; }
.chip .name { font-weight: 900; font-size:.95rem; letter-spacing:.1px; }
.chip .sub { font-size:.8rem; opacity:.85; }

/* Panel del popover */
.panel {
  min-width: 360px; border-radius: 16px; overflow: hidden;
  background: var(--surface); color: var(--text); border: 1px solid var(--border);
  box-shadow: 0 14px 32px rgba(0,0,0,0.12), 0 6px 18px rgba(0,0,0,0.08);
}

.hero {
  display:flex; gap:1rem; align-items:center; padding: 1rem;
  background: linear-gradient(135deg,
    color-mix(in srgb, var(--primary) 10%, var(--surface-alt)),
    color-mix(in srgb, var(--primary) 4%, var(--surface))
  );
}

/* Avatar circular */
.ring { width: 56px; height: 56px; border-radius: 50%; display:grid; place-items:center;
  background: linear-gradient(135deg, color-mix(in srgb, var(--primary) 24%, var(--surface-alt)), color-mix(in srgb, var(--secondary) 18%, var(--surface)));
  border: 2px solid color-mix(in srgb, var(--primary) 45%, var(--border));
}
.ring .inner { width: 44px; height: 44px; border-radius:50%; display:flex; align-items:center; justify-content:center; font-weight: 900; color: #fff;
  background: linear-gradient(135deg, var(--primary), color-mix(in srgb, var(--primary-600) 60%, #111));
  box-shadow: 0 6px 18px rgba(0,0,0,.22);
}

.hero-meta { display:flex; flex-direction:column; gap:.15rem; line-height:1.12; }
.hero-meta .title { font-weight: 900; font-size: 1.05rem; }
.hero-meta .hint { font-size:.82rem; opacity:.9; }

.body { padding: .9rem 1rem 1rem; display:flex; flex-direction:column; gap:.75rem; }

/* Progreso de sesión */
.session { display:flex; align-items:center; gap:.6rem; }
.bar { position:relative; flex: 1 1 auto; height: 7px; border-radius: 999px; background: color-mix(in srgb, var(--border) 55%, transparent); overflow:hidden; }
.bar .bar-fill { position:absolute; left:0; top:0; bottom:0; height:100%; background: linear-gradient(90deg, var(--primary), color-mix(in srgb, var(--primary) 20%, var(--secondary))); border-radius: 999px; width: 0; }
.session .time { font-size:.8rem; font-weight: 800; min-width: 70px; text-align:right; }

/* Lista de organizaciones */
.orgs { display:flex; flex-direction:column; gap:.35rem; }
.org-item {
  display:flex; align-items:center; gap:.6rem; padding:.42rem .55rem; border-radius:12px; cursor:pointer;
  background: var(--surface); color: var(--text); border:1px solid var(--border);
}
.org-item b { color: inherit; }
.org-item .meta-col { display:flex; flex-direction:column; line-height:1.1; }
.org-item .status { opacity:.82; }
.org-item.active { outline: 2px solid color-mix(in srgb, var(--primary) 55%, var(--border)); background: color-mix(in srgb, var(--primary) 10%, var(--surface)); }
.org-item .dot { width:8px; height:8px; border-radius:50%; background: var(--primary); box-shadow: 0 0 0 2px var(--surface); }

.actions { display:flex; gap:.5rem; justify-content:flex-end; flex-wrap:wrap; margin-top:.2rem; }

/* Tema claro/oscuro del chip (ajustes mínimos porque ya usamos tokens) */
:host-context(.theme-dark) .chip,
:host-context(.theme-black) .chip {
  box-shadow: 0 8px 18px rgba(0,0,0,.25);
}
:host-context(.theme-dark) .chip .initials,
:host-context(.theme-black) .chip .initials {
  background: color-mix(in srgb, var(--surface-alt) 70%, #000);
  color: var(--text);
}
